sandbox/tests/main.test.js
# sandbox/tests/main.test.js
import { describe, test, expect, vi } from "vitest";
import { main } from "../source/main.js";

describe("Main Output", () => {
  test("should display ASCII plots when no arguments provided", () => {
    const logSpy = vi.spyOn(console, "log").mockImplementation(() => {});
    main([]);
    const output = logSpy.mock.calls.map(call => call[0]).join("\n");
    logSpy.mockRestore();
    
    expect(output).toContain("Quadratic Plot");
    expect(output).toContain("Sine Plot");
    // Ensure that at least one plot line exists for quadratic plot
    expect(output).toMatch(/x=\s*-?\d+\s+y=\s*\d+\s+\|/);
  });

  test("should output JSON string when arguments are provided", () => {
    const logSpy = vi.spyOn(console, "log").mockImplementation(() => {});
    const args = ["arg1", "arg2"];
    main(args);
    const output = logSpy.mock.calls.map(call => call[0]).join("\n");
    logSpy.mockRestore();
    
    expect(output).toContain(JSON.stringify(args));
  });
});
