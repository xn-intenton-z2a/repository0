<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>agentic-lib</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 2em; background-color: #f9f9f9; color: #333; }
    header { padding-bottom: 1em; border-bottom: 2px solid #ccc; margin-bottom: 1em; }
    h1 { font-size: 2em; }
    section { margin-bottom: 1.5em; }
    ul { list-style: none; padding: 0; }
    li { margin: 0.5em 0; }
    .label { font-weight: bold; }
    footer { margin-top: 2em; font-size: 0.9em; color: #777; }
    a { color: #0366d6; text-decoration: none; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <header>
    <h1>agentic-lib</h1>
    <p><a href="https://github.com/xn-intenton-z2a/agentic-lib">repository</a> - <a href="https://xn-intenton-z2a.github.io/agentic-lib/latest.html">latest stats</a> - <a href="https://xn-intenton-z2a.github.io/agentic-lib/all.html">all stats</a></p>
  </header>
  <section>
    <h1 class="md-github"><a class="md-github__anchor" name="vitest_doc" href="#vitest_doc"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>VITEST_DOC</h1>
<h2 class="md-github"><a class="md-github__anchor" name="crawl-summary" href="#crawl-summary"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Crawl Summary</h2>
<p class="md-github">The crawled Vitest technical content provides detailed installation commands, requirements (Vite &gt;= v5.0.0, Node &gt;= v18.0.0), code examples for writing tests, instructions for configuring Vitest through vitest.config (including merging with Vite's config), detailed CLI usage, workspace configuration examples, dependency optimization options, environment settings, and troubleshooting best practices. It includes precise configuration options with their default values and effects.</p>
<h2 class="md-github"><a class="md-github__anchor" name="normalised-extract" href="#normalised-extract"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Normalised Extract</h2>
<h1 class="md-github"><a class="md-github__anchor" name="table-of-contents" href="#table-of-contents"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Table of Contents</h1>
<ol class="md-github">
<li class="md-github">Installation</li>
<li class="md-github">Writing Tests</li>
<li class="md-github">Running Tests (CLI)</li>
<li class="md-github">Configuration (vitest.config)</li>
<li class="md-github">Dependency Optimization</li>
<li class="md-github">Environment Configuration</li>
<li class="md-github">Workspace Setup</li>
<li class="md-github">CLI Options &amp; Snapshots</li>
<li class="md-github">Troubleshooting &amp; Best Practices</li>
</ol>
<hr class="md-github">
<h2 class="md-github"><a class="md-github__anchor" name="1-installation" href="#1-installation"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. Installation</h2>
<p class="md-github">• Commands: <code class="md-github">npm install -D vitest</code>, <code class="md-github">yarn add -D vitest</code>, <code class="md-github">pnpm add -D vitest</code>, <code class="md-github">bun add -D vitest</code>
• Requirements: Vite &gt;= v5.0.0, Node &gt;= v18.0.0</p>
<h2 class="md-github"><a class="md-github__anchor" name="2-writing-tests" href="#2-writing-tests"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. Writing Tests</h2>
<p class="md-github">Example:</p>
<pre class="md-github"><code class="md-github language-javascript">// sum.js
export function sum(a, b) {
  return a + b;
}
</code></pre>
<pre class="md-github"><code class="md-github language-javascript">// sum.test.js
import { expect, test } from 'vitest';
import { sum } from './sum.js';

test('adds 1 + 2 to equal 3', () =&gt; {
  expect(sum(1, 2)).toBe(3);
});
</code></pre>
<h2 class="md-github"><a class="md-github__anchor" name="3-running-tests-cli" href="#3-running-tests-cli"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. Running Tests (CLI)</h2>
<p class="md-github">• Run once: <code class="md-github">vitest run</code>
• Watch mode: <code class="md-github">vitest --watch</code>
• For coverage: <code class="md-github">vitest run --coverage</code></p>
<h2 class="md-github"><a class="md-github__anchor" name="4-configuration-vitestconfig" href="#4-configuration-vitestconfig"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. Configuration (vitest.config)</h2>
<ul class="md-github">
<li class="md-github">Create <code class="md-github">vitest.config.ts</code> using <code class="md-github">defineConfig</code> from 'vitest/config'</li>
<li class="md-github">Merge with Vite config using <code class="md-github">mergeConfig</code> if needed</li>
</ul>
<p class="md-github">Example:</p>
<pre class="md-github"><code class="md-github language-typescript">import { defineConfig } from 'vitest/config';

export default defineConfig({
  test: {
    include: ['**/*.{test,spec}.?(c|m)[jt]s?(x)'],
    exclude: [
      '**/node_modules/**',
      '**/dist/**',
      '**/cypress/**',
      '**/.{idea,git,cache,output,temp}/**',
      '**/{karma,rollup,webpack,vite,vitest,jest,ava,babel,nyc,cypress,tsup,build,eslint,prettier}.config.*'
    ],
    globals: false,
    environment: 'node',
    pool: 'forks'
  }
});
</code></pre>
<h2 class="md-github"><a class="md-github__anchor" name="5-dependency-optimization" href="#5-dependency-optimization"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5. Dependency Optimization</h2>
<ul class="md-github">
<li class="md-github"><code class="md-github">server.deps.external</code>: Default pattern <code class="md-github">/\/node_modules\//</code></li>
<li class="md-github"><code class="md-github">server.deps.inline</code>: Array of packages or <code class="md-github">true</code> to inline all</li>
<li class="md-github"><code class="md-github">server.deps.fallbackCJS</code>: Default <code class="md-github">false</code></li>
<li class="md-github"><code class="md-github">deps.optimizer</code>: Configuration for bundling (ssr and web modes)</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="6-environment-configuration" href="#6-environment-configuration"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>6. Environment Configuration</h2>
<ul class="md-github">
<li class="md-github">Set via <code class="md-github">environment</code> in the config (e.g., 'node', 'jsdom', 'happy-dom', 'edge-runtime')</li>
<li class="md-github">Also configurable via file docblocks:</li>
</ul>
<pre class="md-github"><code class="md-github language-javascript">/**
 * @vitest-environment jsdom
 */
</code></pre>
<h2 class="md-github"><a class="md-github__anchor" name="7-workspace-setup" href="#7-workspace-setup"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7. Workspace Setup</h2>
<p class="md-github">Define in <code class="md-github">vitest.workspace.ts</code>:</p>
<pre class="md-github"><code class="md-github language-typescript">import { defineWorkspace } from 'vitest/config';

export default defineWorkspace([
  'packages/*',
  'tests/*/vitest.config.{e2e,unit}.ts',
  {
    test: {
      name: 'happy-dom',
      root: './shared_tests',
      environment: 'happy-dom',
      setupFiles: ['./setup.happy-dom.ts'],
    },
  },
  {
    test: {
      name: 'node',
      root: './shared_tests',
      environment: 'node',
      setupFiles: ['./setup.node.ts'],
    },
  },
]);
</code></pre>
<h2 class="md-github"><a class="md-github__anchor" name="8-cli-options--snapshots" href="#8-cli-options--snapshots"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>8. CLI Options &amp; Snapshots</h2>
<ul class="md-github">
<li class="md-github">Update snapshots: <code class="md-github">vitest --update</code> or <code class="md-github">-u</code></li>
<li class="md-github">Set test root: <code class="md-github">--root &lt;path&gt;</code></li>
<li class="md-github">Specify reporters: <code class="md-github">--reporter=&lt;name&gt;</code></li>
<li class="md-github">For additional options, run <code class="md-github">npx vitest --help</code></li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="9-troubleshooting--best-practices" href="#9-troubleshooting--best-practices"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>9. Troubleshooting &amp; Best Practices</h2>
<ul class="md-github">
<li class="md-github">Ensure test file naming with <code class="md-github">.test.</code> or <code class="md-github">.spec.</code></li>
<li class="md-github">For Bun users, run tests using <code class="md-github">bun run test</code></li>
<li class="md-github">When using separate configs for Vite and Vitest, merge with <code class="md-github">mergeConfig</code></li>
<li class="md-github">Verify alias configurations are consistent between Vite and Vitest</li>
<li class="md-github">In sandboxed environments (e.g., vmThreads), be mindful of memory leaks and different global behaviors.</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="supplementary-details" href="#supplementary-details"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Supplementary Details</h2>
<h2 class="md-github"><a class="md-github__anchor" name="supplementary-technical-specifications" href="#supplementary-technical-specifications"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Supplementary Technical Specifications</h2>
<ul class="md-github">
<li class="md-github">
<p class="md-github"><strong class="md-github">Installation Requirements:</strong></p>
<ul class="md-github">
<li class="md-github">Vite &gt;= v5.0.0</li>
<li class="md-github">Node &gt;= v18.0.0</li>
</ul>
</li>
<li class="md-github">
<p class="md-github"><strong class="md-github">Configuration Options (vitest.config):</strong></p>
<ul class="md-github">
<li class="md-github">include: string[]; Default: ['**/*.{test,spec}.?(c|m)[jt]s?(x)']</li>
<li class="md-github">exclude: string[]; Default: ['<strong class="md-github">/node_modules/</strong>', '<strong class="md-github">/dist/</strong>', '<strong class="md-github">/cypress/</strong>', '<strong class="md-github">/.{idea,git,cache,output,temp}/</strong>', '**/{karma,rollup,webpack,vite,vitest,jest,ava,babel,nyc,cypress,tsup,build,eslint,prettier}.config.*']</li>
<li class="md-github">globals: boolean; Default: false</li>
<li class="md-github">environment: string; Default: 'node' (options: 'node', 'jsdom', 'happy-dom', 'edge-runtime', etc.)</li>
<li class="md-github">pool: 'threads' | 'forks' | 'vmThreads' | 'vmForks'; Default: 'forks'</li>
</ul>
</li>
<li class="md-github">
<p class="md-github"><strong class="md-github">Dependency Handling Options:</strong></p>
<ul class="md-github">
<li class="md-github">server.deps.external: (string | RegExp)[]; Default: [//node_modules//]</li>
<li class="md-github">server.deps.inline: (string | RegExp)[] | true; Default: []</li>
<li class="md-github">server.deps.fallbackCJS: boolean; Default: false</li>
<li class="md-github">server.deps.cacheDir: string; Default: 'node_modules/.vite'</li>
<li class="md-github">deps.optimizer: { ssr?: { enabled: boolean }, web?: { enabled: boolean, transformAssets?: boolean, transformCss?: boolean, transformGlobPattern?: RegExp | RegExp[] } }</li>
</ul>
</li>
<li class="md-github">
<p class="md-github"><strong class="md-github">CLI Options Include:</strong></p>
<ul class="md-github">
<li class="md-github">--config: specify custom config file</li>
<li class="md-github">--watch: enable watch mode</li>
<li class="md-github">--update (or -u): update snapshot files</li>
<li class="md-github">--reporter: specify reporter (e.g., default, json, html, junit)</li>
<li class="md-github">--root / --dir: set project root</li>
</ul>
</li>
<li class="md-github">
<p class="md-github"><strong class="md-github">Best Practices:</strong></p>
<ul class="md-github">
<li class="md-github">Use a unified configuration when possible; merge Vite and Vitest configurations.</li>
<li class="md-github">For in-depth debugging, use <code class="md-github">deps.optimizer</code> options to force rebundling or inspect inlined modules.</li>
<li class="md-github">For cross-environment testing, set the environment via config or docblocks to match test requirements.</li>
<li class="md-github">In monorepo setups, define workspaces using glob patterns and explicit config objects.</li>
</ul>
</li>
<li class="md-github">
<p class="md-github"><strong class="md-github">Troubleshooting Procedures:</strong></p>
<ul class="md-github">
<li class="md-github">To diagnose misconfiguration, run <code class="md-github">npx vitest --help</code> to display all available CLI options.</li>
<li class="md-github">When snapshots fail, use <code class="md-github">vitest --update</code> to refresh snapshots.</li>
<li class="md-github">For dependency resolution issues, inspect <code class="md-github">server.deps</code> and <code class="md-github">deps.optimizer</code> settings.</li>
<li class="md-github">For sandbox related errors (e.g., in vmThreads), review memory limits and fallback options in pool settings.</li>
</ul>
</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="reference-details" href="#reference-details"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Reference Details</h2>
<h2 class="md-github"><a class="md-github__anchor" name="complete-api-and-sdk-specifications" href="#complete-api-and-sdk-specifications"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Complete API and SDK Specifications</h2>
<h3 class="md-github"><a class="md-github__anchor" name="1-defineconfig-api" href="#1-defineconfig-api"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. defineConfig API</h3>
<p class="md-github">Signature:</p>
<pre class="md-github"><code class="md-github language-typescript">function defineConfig(config: { test?: TestOptions; [key: string]: any }): { test?: TestOptions; [key: string]: any };
</code></pre>
<p class="md-github">Where TestOptions may include:</p>
<ul class="md-github">
<li class="md-github">include: string[]</li>
<li class="md-github">exclude: string[]</li>
<li class="md-github">globals: boolean</li>
<li class="md-github">environment: 'node' | 'jsdom' | 'happy-dom' | 'edge-runtime' | string</li>
<li class="md-github">pool: 'threads' | 'forks' | 'vmThreads' | 'vmForks'</li>
<li class="md-github">deps: {
external?: (string | RegExp)[];
inline?: (string | RegExp)[] | true;
fallbackCJS?: boolean;
cacheDir?: string;
optimizer?: {
ssr?: { enabled: boolean };
web?: { enabled: boolean, transformAssets?: boolean, transformCss?: boolean, transformGlobPattern?: RegExp | RegExp[] };
};
}</li>
</ul>
<h3 class="md-github"><a class="md-github__anchor" name="2-mergeconfig-api" href="#2-mergeconfig-api"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. mergeConfig API</h3>
<p class="md-github">Signature:</p>
<pre class="md-github"><code class="md-github language-typescript">function mergeConfig(baseConfig: any, overrideConfig: any): any;
</code></pre>
<p class="md-github">Usage Example:</p>
<pre class="md-github"><code class="md-github language-typescript">import { defineConfig, mergeConfig } from 'vitest/config';
import viteConfig from './vite.config.mjs';

export default mergeConfig(viteConfig, defineConfig({
  test: {
    exclude: ['packages/template/*'],
  },
}));
</code></pre>
<h3 class="md-github"><a class="md-github__anchor" name="3-cli-options" href="#3-cli-options"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. CLI Options</h3>
<ul class="md-github">
<li class="md-github"><code class="md-github">--config &lt;path&gt;</code>: Use a specific configuration file</li>
<li class="md-github"><code class="md-github">--watch</code> or <code class="md-github">-w</code>: Enable watch mode for test execution</li>
<li class="md-github"><code class="md-github">--update</code> or <code class="md-github">-u</code>: Update snapshot files</li>
<li class="md-github"><code class="md-github">--coverage</code>: Run tests with code coverage</li>
<li class="md-github"><code class="md-github">--reporter &lt;name&gt;</code>: Specify reporter (e.g., default, json, html, junit)</li>
<li class="md-github"><code class="md-github">--root &lt;path&gt;</code> / <code class="md-github">--dir &lt;path&gt;</code>: Specify the project root</li>
</ul>
<p class="md-github">Example Command:</p>
<pre class="md-github"><code class="md-github language-bash">npx vitest --config ./vitest.config.ts --watch
</code></pre>
<h3 class="md-github"><a class="md-github__anchor" name="4-code-examples-with-comments" href="#4-code-examples-with-comments"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. Code Examples with Comments</h3>
<pre class="md-github"><code class="md-github language-javascript">// Example test file: math.test.js
import { test, expect } from 'vitest';

// Simple sum function
export const sum = (a, b) =&gt; a + b;

// Test case: verifies that sum adds numbers correctly
test('sum adds 1 + 2 to equal 3', () =&gt; {
  expect(sum(1, 2)).toBe(3);
});
</code></pre>
<h3 class="md-github"><a class="md-github__anchor" name="5-best-practices" href="#5-best-practices"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5. Best Practices</h3>
<ul class="md-github">
<li class="md-github">Always include <code class="md-github">.test.</code> or <code class="md-github">.spec.</code> in test file names to ensure detection.</li>
<li class="md-github">Use a unified config file for both Vite and Vitest to avoid mismatched configuration.</li>
<li class="md-github">Utilize workspace configuration in monorepo setups to manage multiple test environments within a single process.</li>
<li class="md-github">Update snapshots with <code class="md-github">--update</code> flag when intentional changes occur.</li>
</ul>
<h3 class="md-github"><a class="md-github__anchor" name="6-detailed-troubleshooting-procedures" href="#6-detailed-troubleshooting-procedures"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>6. Detailed Troubleshooting Procedures</h3>
<ol class="md-github">
<li class="md-github">
<p class="md-github">If tests are not found:</p>
<ul class="md-github">
<li class="md-github">Verify that file patterns in the <code class="md-github">include</code> and <code class="md-github">exclude</code> options are accurate.</li>
<li class="md-github">Run <code class="md-github">npx vitest --help</code> to check effective CLI parameters.</li>
</ul>
</li>
<li class="md-github">
<p class="md-github">For dependency resolution errors:</p>
<ul class="md-github">
<li class="md-github">Check the settings under <code class="md-github">server.deps</code> and ensure that externalized modules are correctly patterned.</li>
<li class="md-github">Use inline options in <code class="md-github">server.deps.inline</code> for packages in ESM format.</li>
</ul>
</li>
<li class="md-github">
<p class="md-github">For sandbox environment issues (e.g., using <code class="md-github">vmThreads</code>):</p>
<ul class="md-github">
<li class="md-github">Consider switching to <code class="md-github">forks</code> if native module globals cause errors.</li>
<li class="md-github">Increase memory limits using <code class="md-github">poolOptions.vmThreads.memoryLimit</code> if memory leaks are detected.</li>
</ul>
</li>
<li class="md-github">
<p class="md-github">To merge Vite and Vitest configuration files:</p>
<ul class="md-github">
<li class="md-github">Use the <code class="md-github">mergeConfig</code> method as shown in the example to combine settings without overriding vital options.</li>
</ul>
</li>
</ol>
<p class="md-github">Commands for debugging configuration:</p>
<pre class="md-github"><code class="md-github language-bash"># List effective configuration
npx vitest --config ./vitest.config.ts --debug

# Run tests with verbose logging
npx vitest --watch --reporter verbose
</code></pre>
<p class="md-github">These API specifications, complete method signatures, detailed code examples, configuration options, best practices, and troubleshooting procedures form the complete technical reference for implementing and using Vitest directly without consulting external documentation.</p>
<h2 class="md-github"><a class="md-github__anchor" name="original-source" href="#original-source"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Original Source</h2>
<p class="md-github">Vitest Testing Framework Documentation
https://vitest.dev/</p>
<h2 class="md-github"><a class="md-github__anchor" name="digest-of-vitest_doc" href="#digest-of-vitest_doc"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Digest of VITEST_DOC</h2>
<h1 class="md-github"><a class="md-github__anchor" name="vitest-documentation-retrieved-2023-10-06" href="#vitest-documentation-retrieved-2023-10-06"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Vitest Documentation (Retrieved: 2023-10-06)</h1>
<h2 class="md-github"><a class="md-github__anchor" name="installation" href="#installation"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h2>
<ul class="md-github">
<li class="md-github">Install via npm: <code class="md-github">npm install -D vitest</code></li>
<li class="md-github">Install via yarn: <code class="md-github">yarn add -D vitest</code></li>
<li class="md-github">Install via pnpm: <code class="md-github">pnpm add -D vitest</code></li>
<li class="md-github">Install via bun: <code class="md-github">bun add -D vitest</code></li>
</ul>
<p class="md-github">Requirements:</p>
<ul class="md-github">
<li class="md-github">Vite &gt;= v5.0.0</li>
<li class="md-github">Node &gt;= v18.0.0</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="writing-tests" href="#writing-tests"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Writing Tests</h2>
<p class="md-github">Example implementation:</p>
<pre class="md-github"><code class="md-github language-javascript">// sum.js
export function sum(a, b) {
  return a + b;
}
</code></pre>
<pre class="md-github"><code class="md-github language-javascript">// sum.test.js
import { expect, test } from 'vitest';
import { sum } from './sum.js';

test('adds 1 + 2 to equal 3', () =&gt; {
  expect(sum(1, 2)).toBe(3);
});
</code></pre>
<p class="md-github">Update your package.json:</p>
<pre class="md-github"><code class="md-github language-json">{
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;vitest&quot;
  }
}
</code></pre>
<h2 class="md-github"><a class="md-github__anchor" name="running-tests-cli" href="#running-tests-cli"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Running Tests (CLI)</h2>
<ul class="md-github">
<li class="md-github">Run tests once: <code class="md-github">vitest run</code></li>
<li class="md-github">Watch mode: <code class="md-github">vitest --watch</code> or <code class="md-github">npm run test</code> (if configured)</li>
<li class="md-github">For coverage: <code class="md-github">vitest run --coverage</code></li>
</ul>
<p class="md-github">For help: <code class="md-github">npx vitest --help</code></p>
<h2 class="md-github"><a class="md-github__anchor" name="configuration" href="#configuration"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configuration</h2>
<p class="md-github">Vitest automatically reads Vite's configuration. In case of custom testing setups, create a separate config file:</p>
<pre class="md-github"><code class="md-github language-typescript">// vitest.config.ts
import { defineConfig } from 'vitest/config';

export default defineConfig({
  test: {
    // Insert precise configuration options here
  },
});
</code></pre>
<p class="md-github">To merge with Vite's config:</p>
<pre class="md-github"><code class="md-github language-javascript">// vitest.config.mjs
import { defineConfig, mergeConfig } from 'vitest/config';
import viteConfig from './vite.config.mjs';

export default mergeConfig(viteConfig, defineConfig({
  test: {
    // Custom test configuration options
  },
}));
</code></pre>
<h3 class="md-github"><a class="md-github__anchor" name="example-config-options-in-vitestconfigts" href="#example-config-options-in-vitestconfigts"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example: Config Options in vitest.config.ts</h3>
<pre class="md-github"><code class="md-github language-typescript">import { defineConfig } from 'vitest/config';

export default defineConfig({
  test: {
    include: ['**/*.{test,spec}.?(c|m)[jt]s?(x)'],
    exclude: ['**/node_modules/**', '**/dist/**', '**/cypress/**', '**/.{idea,git,cache,output,temp}/**', '**/{karma,rollup,webpack,vite,vitest,jest,ava,babel,nyc,cypress,tsup,build,eslint,prettier}.config.*'],
    globals: false,
    environment: 'node',
    pool: 'forks',
    deps: {
      external: [/\/node_modules\//],
      inline: [],
      fallbackCJS: false,
      cacheDir: 'node_modules/.vite',
      optimizer: {
        ssr: { enabled: false },
        web: { enabled: true }
      }
    }
  },
});
</code></pre>
<h2 class="md-github"><a class="md-github__anchor" name="workspaces" href="#workspaces"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Workspaces</h2>
<p class="md-github">Define workspace configuration in a separate file (e.g., vitest.workspace.ts):</p>
<pre class="md-github"><code class="md-github language-typescript">import { defineWorkspace } from 'vitest/config';

export default defineWorkspace([
  'packages/*',
  'tests/*/vitest.config.{e2e,unit}.ts',
  {
    test: {
      name: 'happy-dom',
      root: './shared_tests',
      environment: 'happy-dom',
      setupFiles: ['./setup.happy-dom.ts'],
    },
  },
  {
    test: {
      name: 'node',
      root: './shared_tests',
      environment: 'node',
      setupFiles: ['./setup.node.ts'],
    },
  },
]);
</code></pre>
<h2 class="md-github"><a class="md-github__anchor" name="dependency-optimization--transformation" href="#dependency-optimization--transformation"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Dependency Optimization &amp; Transformation</h2>
<p class="md-github">Key configuration parameters for dependency handling in the test environment:</p>
<ul class="md-github">
<li class="md-github"><code class="md-github">server.deps.external</code>: Default is <code class="md-github">/\/node_modules\//</code></li>
<li class="md-github"><code class="md-github">server.deps.inline</code>: Can be an array of package names or RegExp patterns or <code class="md-github">true</code> for inlining all dependencies</li>
<li class="md-github"><code class="md-github">server.deps.fallbackCJS</code>: Defaults to <code class="md-github">false</code></li>
<li class="md-github"><code class="md-github">deps.optimizer</code>: Enables bundling via esbuild; supports <code class="md-github">ssr</code> and <code class="md-github">web</code> modes</li>
</ul>
<p class="md-github">Example:</p>
<pre class="md-github"><code class="md-github language-typescript">export default defineConfig({
  test: {
    deps: {
      optimizer: {
        web: { enabled: true, transformAssets: true, transformCss: true, transformGlobPattern: [] },
        ssr: { enabled: false }
      }
    }
  }
});
</code></pre>
<h2 class="md-github"><a class="md-github__anchor" name="environment-configuration" href="#environment-configuration"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Environment Configuration</h2>
<p class="md-github">Set the test environment using the <code class="md-github">environment</code> option or with file docblocks. Common environments:</p>
<ul class="md-github">
<li class="md-github"><code class="md-github">node</code> (default)</li>
<li class="md-github"><code class="md-github">jsdom</code></li>
<li class="md-github"><code class="md-github">happy-dom</code></li>
<li class="md-github"><code class="md-github">edge-runtime</code></li>
</ul>
<p class="md-github">Example:</p>
<pre class="md-github"><code class="md-github language-typescript">export default defineConfig({
  test: {
    environment: 'jsdom'
  }
});
</code></pre>
<p class="md-github">Docblock style:</p>
<pre class="md-github"><code class="md-github language-javascript">/**
 * @vitest-environment jsdom
 */
</code></pre>
<h2 class="md-github"><a class="md-github__anchor" name="cli-and-snapshot-options" href="#cli-and-snapshot-options"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CLI and Snapshot Options</h2>
<ul class="md-github">
<li class="md-github">Update snapshots: <code class="md-github">vitest --update</code> or <code class="md-github">-u</code></li>
<li class="md-github">Watch mode: <code class="md-github">vitest --watch</code> or <code class="md-github">-w</code></li>
<li class="md-github">Specify test root or directory: <code class="md-github">--root &lt;path&gt;</code> or <code class="md-github">--dir &lt;path&gt;</code></li>
<li class="md-github">Pass custom reporters using the <code class="md-github">--reporter</code> flag</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="troubleshooting--best-practices" href="#troubleshooting--best-practices"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Troubleshooting &amp; Best Practices</h2>
<ul class="md-github">
<li class="md-github">Use correct file naming: tests must contain <code class="md-github">.test.</code> or <code class="md-github">.spec.</code></li>
<li class="md-github">If using Bun, run tests with <code class="md-github">bun run test</code>.</li>
<li class="md-github">For debugging in sandbox environments (e.g., vmThreads), be aware of memory leaks and differences in native module globals.</li>
<li class="md-github">Use merging configuration (with <code class="md-github">mergeConfig</code>) when splitting Vite and Vitest configurations.</li>
<li class="md-github">Ensure alias configurations are consistent between Vite and Vitest.</li>
</ul>
<hr class="md-github">
<p class="md-github">Attribution: Data retrieved from https://vitest.dev/ (Data Size: 25494893 bytes, Links Found: 21765).</p>
<h2 class="md-github"><a class="md-github__anchor" name="attribution" href="#attribution"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Attribution</h2>
<ul class="md-github">
<li class="md-github">Source: Vitest Testing Framework Documentation</li>
<li class="md-github">URL: https://vitest.dev/</li>
<li class="md-github">License: MIT</li>
<li class="md-github">Crawl Date: 2025-04-21T04:49:04.625Z</li>
<li class="md-github">Data Size: 25494893 bytes</li>
<li class="md-github">Links Found: 21765</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="retrieved" href="#retrieved"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Retrieved</h2>
<p class="md-github">2025-04-21</p>

  </section>
  <footer>
    <p>Generated on 2025-04-21T13:22:29.004Z</p>
  </footer>
</body>
</html>